================================================================================
CHAPTER 4 WRITING GUIDE: SECTIONS 4.4 AND 4.5
================================================================================

WRITING STYLE REQUIREMENTS:
- Formal, academic, third-person
- Verb Tense: Present for system description, Past only for completed development
- Voice: Mostly Passive, Active allowed when describing system behavior
- No markdown files - Provide text content only

================================================================================
SECTION 4.4: SYSTEM FEATURES
================================================================================

PURPOSE:
Present unique and core functionalities in detail, emphasizing:
- Innovative Features
- Process automation
- Data tracking
- Security measures
- Notifications or alerts

================================================================================
FEATURE 1: AUTOMATED NOTIFICATION SYSTEM (3 TYPES)
================================================================================

DESCRIPTION:
The system features a comprehensive automated notification system with three 
delivery channels: SMS, Email, and Mobile App notifications. This eliminates 
the need for manual monitoring and reduces the risk of missed vaccinations.

TECHNICAL DETAILS:

Web Platform (SMS + Email):
- Daily cron job runs at 2:40 AM Philippines time (Asia/Manila timezone)
- Two notification types: reminder (1 day before) and same-day notifications
- SMS delivery via TextBee API
- Email delivery via PHPMailer with Gmail SMTP
- Notification deduplication through notification_logs table
- Checks: schedule_date, batch_schedule_date, and catch_up_date
- Logs stored in logs/daily_notifications_YYYY-MM-DD.log

Mobile App Notifications:
- App automatically fetches data daily
- Checks if children have immunizations scheduled for today or tomorrow
- Runs automatically at two fixed times:
  * 11:59 PM (evening notification)
  * 8:00 AM (morning notification)
- Third option: User can set custom alarm times
- Fetches same data as web: batch_schedule_date, schedule_date, or catch_up_date
- Same notification logic as web platform

IMPLEMENTATION FILES:
- cron/daily_notifications.php (SMS + Email)
- Mobile app notification service (runs at 11:59 PM and 8:00 AM)

SAMPLE TEXT:
"The system features a comprehensive automated notification system that alerts 
parents through three delivery channels: SMS, email, and mobile app notifications. 
The web platform sends SMS and email notifications through a daily automated 
process that runs at 2:40 AM, checking for upcoming immunizations scheduled for 
the following day or the same day. The system checks multiple date fields, 
including schedule dates, batch schedule dates, and catch-up dates, ensuring 
comprehensive coverage of all scheduled vaccinations. 

The mobile application complements the web notifications by automatically 
fetching immunization data and sending push notifications at two fixed times: 
8:00 AM for morning reminders and 11:59 PM for evening reminders. Additionally, 
users can configure custom alarm times according to their preferences. The 
mobile app uses the same data sources as the web platform, checking batch 
schedule dates, guideline schedule dates, and catch-up dates to ensure 
consistency across all notification channels.

This multi-channel notification approach eliminates the need for manual 
monitoring and significantly reduces the risk of missed vaccinations by 
providing parents with timely reminders through their preferred communication 
channels."

================================================================================
FEATURE 2: AUTOMATED MISSED IMMUNIZATION TRACKING
================================================================================

DESCRIPTION:
The system incorporates an automated missed immunization tracker that identifies 
overdue vaccinations and automatically assigns catch-up dates based on the 
practice of BHW and midwives in Linao Health Center.

TECHNICAL DETAILS:
- Daily cron job at 1:00 AM automatically marks missed immunizations
- Catch-up date calculation: 7 days after original schedule (next week)
- Based on Linao Health Center practice: children return the next week
- Real-time status updates when records are accessed
- Batch processing (1000 records per batch) for efficiency
- Checks: schedule_date, batch_schedule_date, catch_up_date
- Prevents duplicate status updates
- Catch-up dates also trigger SMS and email notifications for missed vaccinations

IMPLEMENTATION FILE:
- cron/update_missed_immunizations.php

SAMPLE TEXT:
"The system incorporates an automated missed immunization tracker that 
identifies overdue vaccinations and automatically assigns catch-up dates. 
When a child misses a scheduled or batch-scheduled immunization, the system 
automatically marks the record as 'missed' and calculates a catch-up date set 
for the following week, based on the standard practice of BHW and midwives at 
Linao Health Center. This automated process runs daily at 1:00 AM, checking 
all immunization records and updating their status accordingly.

The catch-up date mechanism ensures that parents are notified of missed 
vaccinations and provided with a new appointment date. The system sends SMS 
and email notifications for missed immunizations, alerting parents to bring 
their children for catch-up vaccinations. This automated tracking eliminates 
the need for manual monitoring and ensures that no missed vaccination goes 
unnoticed, improving overall immunization coverage rates."

================================================================================
FEATURE 3: AUTOMATED VACCINE TRACKING FOR CURRENT AND NEXT MONTH
================================================================================

DESCRIPTION:
The system implements automated tracking of vaccines needed for the current 
and next month, addressing the requirement of midwives who previously manually 
tracked vaccine requirements for planning purposes.

TECHNICAL DETAILS:
- Tracks vaccines needed for current month and next month
- Requested by midwives to replace manual tracking
- Example: MMR vaccine requires minimum 10 children to open vial
- If only 1 child needs MMR, the vaccine will not be opened
- Helps midwives plan vaccine procurement and usage
- Counts scheduled immunizations by vaccine type for each month
- Provides vaccine count statistics for planning

IMPLEMENTATION FILE:
- php/supabase/bhw/get_dashboard_stats.php (getMonthlyVaccineCounts function)

SAMPLE TEXT:
"The system implements automated tracking of vaccines needed for the current 
and next month, addressing a critical requirement identified by midwives. 
Previously, midwives manually tracked and calculated the number of vaccines 
needed for upcoming months, which was time-consuming and prone to errors. 
The automated system analyzes all scheduled immunizations and calculates the 
exact number of each vaccine type required for the current and next month.

This feature is particularly important for vaccines that require a minimum 
number of children to justify opening a vial. For example, the MMR (Measles, 
Mumps, Rubella) vaccine requires at least 10 children to be scheduled before 
a vial can be opened. If only one child needs the MMR vaccine, the system 
indicates that the vaccine should not be opened, helping midwives make 
informed decisions about vaccine usage and procurement. This automated tracking 
eliminates manual calculation errors and enables better planning of vaccination 
sessions and resource allocation."

================================================================================
FEATURE 4: GROWTH ASSESSMENT SYSTEM
================================================================================

DESCRIPTION:
The system incorporates a growth assessment feature that identifies whether a 
child has normal growth status or requires attention, using data from BHW and 
WHO (World Health Organization) standards.

TECHNICAL DETAILS:
- Requested by BHW to identify child growth status
- Uses BHW data as reference guide
- Implements WHO (World Health Organization) growth standards
- Calculates: Weight-for-Age, Length-for-Age, Weight-for-Length
- Classifies growth status: Normal, Underweight, Overweight, etc.
- Age-based calculations using child's birth date
- Gender-specific standards (boys/girls)
- Real-time assessment during immunization recording

IMPLEMENTATION FILES:
- js/growth-standards/who-growth-calculator.js
- data/growth-standards/ (JSON files with WHO standards)
- views/bhw/immunization.php (growth assessment display)

SAMPLE TEXT:
"The system incorporates a growth assessment feature that evaluates child 
growth status using standards from the World Health Organization (WHO) and 
data provided by BHW. This feature was implemented based on a request from 
BHW personnel who needed a systematic way to identify whether children have 
normal growth patterns or require additional attention.

The growth assessment system calculates three key indicators: Weight-for-Age, 
Length-for-Age (for children 0-11 months), and Weight-for-Length. These 
calculations are performed using WHO growth standards, which provide 
internationally recognized benchmarks for child growth. The system considers 
the child's age, calculated from their birth date, and gender to apply the 
appropriate growth standards. BHW data serves as a reference guide to ensure 
local context is considered alongside international standards.

During immunization recording, health workers can input the child's current 
weight and height, and the system automatically performs the growth assessment, 
displaying whether the child's growth is normal, underweight, overweight, or 
requires attention. This automated assessment eliminates manual calculation 
and interpretation, providing health workers with immediate, standardized 
growth status information."

================================================================================
FEATURE 5: DATA TRACKING FOR CHR AND TARGET CLIENT LIST
================================================================================

DESCRIPTION:
The system provides comprehensive data tracking capabilities for Child Health 
Records (CHR) and Target Client Lists, replacing manual paper-based recording 
systems used by BHW and midwives.

TECHNICAL DETAILS:
- CHR (Child Health Record) - Paper-based document generation
- Immunization record tracking
- Target Client List generation
- Replaces manual recording of child health records
- Replaces manual target client list maintenance
- PDF generation for official documents
- QR code generation for quick record access
- Comprehensive immunization history tracking

IMPLEMENTATION FILES:
- php/supabase/shared/CHRTemplateGenerator.php
- php/supabase/shared/BabyCardPdfGenerator.php
- Various tracking and reporting modules

SAMPLE TEXT:
"The system provides comprehensive data tracking capabilities for Child Health 
Records (CHR) and Target Client Lists, addressing the need to replace manual 
paper-based recording systems. BHW and midwives previously maintained these 
records manually, which was time-consuming and prone to errors. The system 
automates the generation of paper-based CHR documents and target client lists, 
maintaining the same format and structure required by health center protocols.

The system tracks all immunization records, child health information, and 
generates official CHR documents in PDF format that can be printed and 
maintained as physical records. Additionally, the system generates target client 
lists that help health workers identify children who need attention, upcoming 
vaccinations, or follow-up care. Each child record is assigned a QR code, 
enabling quick retrieval of information when the physical document is scanned.

This digital tracking system eliminates manual data entry errors, ensures 
consistency across records, and provides health workers with immediate access 
to comprehensive child health information while maintaining the paper-based 
documentation required by health center procedures."

================================================================================
SECTION 4.5: SECURITY FEATURES
================================================================================

PURPOSE:
Describe mechanisms ensuring system confidentiality, integrity, and authorized 
access.

================================================================================
SECURITY FEATURE 1: AUTHENTICATION METHODS
================================================================================

DESCRIPTION:
The system incorporates bcrypt password hashing with salt for user 
authentication, ensuring that passwords are securely stored and protected 
against common attack vectors.

TECHNICAL DETAILS:
- Login via email or phone number
- Password hashing: bcrypt with salt for users/BHW/midwives
- Hash function: password_hash($password . $salt, PASSWORD_BCRYPT, ['cost' => 12])
- Salt generation: bin2hex(random_bytes(32)) (64-character hex string)
- CSRF token protection in BOTH account creation AND login
- Session-based authentication using PHP native sessions
- Deployment platform: Hostinger hosting

IMPLEMENTATION FILES:
- php/supabase/create_account.php (lines 235-236, CSRF lines 24-55)
- php/supabase/login.php (CSRF protection)
- php/supabase/reset_password.php

SAMPLE TEXT:
"The system incorporates bcrypt password hashing with salt for user 
authentication, ensuring that passwords are securely stored and protected 
against common attack vectors. When a user creates an account, the system 
generates a random 64-character salt value and combines it with the user's 
password before applying the bcrypt hashing algorithm with a cost factor of 
12. This approach ensures that even if two users have the same password, 
their stored hashes will be different due to unique salt values.

The system implements CSRF (Cross-Site Request Forgery) token protection 
during both account creation and login processes to prevent unauthorized 
form submissions. This security measure ensures that form submissions can 
only originate from legitimate sources, protecting users from malicious 
attacks. The system is deployed on Hostinger, a hosting platform that 
provides additional security layers and infrastructure support."

================================================================================
SECURITY FEATURE 2: AUTHORIZATION LEVELS
================================================================================

DESCRIPTION:
The system enforces user roles to restrict access to administrative functions, 
with four distinct authorization levels that determine the features and data 
each user can access.

TECHNICAL DETAILS:
- Four user roles: Admin, BHW (Barangay Health Worker), Midwife, User
- Role-based permissions via access_control.php
- Session-based authorization checks on all protected pages
- Multiple role support per user account
- Permission matrix defines access rights for each role

IMPLEMENTATION FILE:
- php/supabase/shared/access_control.php

SAMPLE TEXT:
"The system enforces user roles to restrict access to administrative functions, 
with four distinct authorization levels that determine the features and data 
each user can access. The roles include Admin, BHW (Barangay Health Worker), 
Midwife, and User, each with specific permissions defined in a permission 
matrix. The system validates user roles through session-based authorization 
checks on all protected pages, ensuring that users can only access features 
and data appropriate to their role.

This role-based access control mechanism prevents unauthorized access to 
sensitive administrative functions and patient data. For example, regular 
users can only view their own children's records, while BHW and midwives have 
access to child health records and immunization management functions. 
Administrators have full system access for user management and system 
configuration. This layered access control ensures that sensitive health 
information is only accessible to authorized personnel."

================================================================================
SECURITY FEATURE 3: DATA VALIDATION
================================================================================

DESCRIPTION:
The system implements comprehensive data validation mechanisms, including input 
sanitization and output encoding, to prevent cross-site scripting (XSS) attacks 
and ensure data integrity.

TECHNICAL DETAILS:
- Email validation: filter_var() with FILTER_SANITIZE_EMAIL
- Output encoding: htmlspecialchars() to prevent XSS
- Input sanitization on all user inputs
- Phone number format validation
- Password strength requirements (8+ chars, uppercase, lowercase, number, 
  special char)

IMPLEMENTATION FILES:
- php/supabase/create_account.php (line 84)
- php/supabase/shared/CHRTemplateGenerator.php (htmlspecialchars usage)

SAMPLE TEXT:
"The system implements comprehensive data validation mechanisms, including input 
sanitization and output encoding, to prevent cross-site scripting (XSS) attacks 
and ensure data integrity. All email inputs are validated and sanitized using 
PHP's filter_var function with FILTER_SANITIZE_EMAIL, ensuring that only valid 
email formats are accepted. When displaying user-generated content, the system 
applies htmlspecialchars encoding to prevent malicious scripts from being 
executed.

Additionally, the system enforces password strength requirements, including 
minimum length of 8 characters, at least one uppercase letter, one lowercase 
letter, one number, and one special character. Phone numbers are validated to 
ensure they conform to the expected format. These validation mechanisms ensure 
that all data entering the system meets quality and security standards, 
preventing both accidental errors and malicious input."

================================================================================
SECURITY FEATURE 4: SQL INJECTION PREVENTION
================================================================================

DESCRIPTION:
The system prevents SQL injection attacks by utilizing Supabase's REST API with 
parameterized queries, eliminating the possibility of raw SQL execution and 
ensuring all database interactions are properly sanitized.

TECHNICAL DETAILS:
- Uses Supabase REST API (PostgREST) instead of direct SQL
- Parameterized queries via URL encoding
- No raw SQL execution in application code
- Prepared statement support available
- All database operations go through API layer

IMPLEMENTATION FILE:
- database/SupabaseConfig.php

SAMPLE TEXT:
"The system prevents SQL injection attacks by utilizing Supabase's REST API 
with parameterized queries, eliminating the possibility of raw SQL execution 
and ensuring all database interactions are properly sanitized. Instead of 
constructing SQL queries directly, the system uses Supabase's PostgREST API, 
which automatically handles parameter encoding and prevents malicious SQL code 
from being injected.

All database operations, including SELECT, INSERT, UPDATE, and DELETE, are 
performed through this API layer, which validates and sanitizes all parameters 
before executing database commands. This approach ensures that user input 
cannot be interpreted as SQL code, effectively preventing SQL injection 
vulnerabilities. The API layer provides an additional security barrier between 
user input and database operations."

================================================================================
SECURITY FEATURE 5: RATE LIMITING AND ADDITIONAL SECURITY
================================================================================

DESCRIPTION:
The system implements rate limiting mechanisms to prevent brute-force attacks 
and tracks all authentication attempts through comprehensive activity logging.

TECHNICAL DETAILS:
- Rate limiting: 10 attempts for login (not 5)
- IP address tracking in activity logs
- Session-based access control
- Automatic session management
- CSRF protection in login and account creation

IMPLEMENTATION FILES:
- php/supabase/login.php (rate limiting)
- php/supabase/create_account.php (rate limiting lines 56-72)

SAMPLE TEXT:
"The system implements rate limiting mechanisms to prevent brute-force attacks 
and tracks all authentication attempts through comprehensive activity logging. 
The system limits login attempts to 10 per IP address, preventing automated 
brute-force attacks while allowing legitimate users sufficient attempts to 
access their accounts. All authentication attempts, whether successful or failed, 
are logged with the user's IP address and timestamp, enabling administrators 
to identify and respond to suspicious activities.

This combination of rate limiting and activity logging provides multiple layers 
of protection against unauthorized access attempts. The system also implements 
CSRF token protection in both login and account creation processes, ensuring 
that form submissions are legitimate and not initiated by malicious third-party 
sites. These security measures collectively protect the system from common 
authentication-based attacks."

================================================================================
WRITING TEMPLATES
================================================================================

SECTION 4.4 OPENING:
"The eBakunado system incorporates several innovative features designed to 
automate immunization management processes and enhance data tracking 
capabilities. These features eliminate manual monitoring tasks, reduce human 
error, and improve overall system efficiency at Linao Health Center."

SECTION 4.4 CLOSING:
"These automated features collectively improve the system's performance by 
reducing manual workload, ensuring timely notifications, and maintaining 
accurate immunization records. The system addresses specific requirements 
identified by BHW and midwives, replacing manual processes with automated 
solutions that enhance efficiency and accuracy."

SECTION 4.5 OPENING:
"The eBakunado system implements multiple security mechanisms to ensure system 
confidentiality, data integrity, and authorized access. These security features 
protect sensitive health information and prevent unauthorized system access, 
ensuring compliance with healthcare data protection requirements."

SECTION 4.5 CLOSING:
"These security measures collectively ensure that the system maintains 
confidentiality of health records, integrity of data, and restricts access to 
authorized personnel only. The multi-layered security approach provides 
comprehensive protection against common web application vulnerabilities while 
maintaining usability for legitimate users."

================================================================================
KEY PHRASES (Academic Style)
================================================================================

For Automation:
- "The system automatically..."
- "An automated process eliminates..."
- "The system features automated..."
- "Process automation reduces..."

For Security:
- "The system incorporates..."
- "Security mechanisms ensure..."
- "The system implements..."
- "Protection is provided through..."

For Benefits:
- "This eliminates the need for..."
- "This reduces the risk of..."
- "This improves..."
- "This enhances..."

================================================================================
SCREENSHOT REQUIREMENTS
================================================================================

Section 4.4:
- Dashboard showing notification alerts (SMS, Email, App)
- Immunization schedule with missed/upcoming indicators
- Vaccine tracking dashboard (current/next month)
- Growth assessment interface showing WHO standards
- CHR document preview
- Target client list interface

Section 4.5:
- Login page showing authentication interface
- CSRF token in login form
- Role selection or permission matrix (4 roles)
- Activity log showing security events
- Error messages showing validation
- Rate limiting message (after 10 attempts)

================================================================================
WORD COUNT GUIDANCE
================================================================================

Section 4.4: 1000-1400 words
- Feature 1 (Notifications): 250-300 words
- Feature 2 (Missed Tracking): 200-250 words
- Feature 3 (Vaccine Tracking): 200-250 words
- Feature 4 (Growth Assessment): 200-250 words
- Feature 5 (Data Tracking): 200-250 words

Section 4.5: 700-1000 words
- Feature 1 (Authentication): 180-200 words
- Feature 2 (Authorization): 150-180 words
- Feature 3 (Data Validation): 120-150 words
- Feature 4 (SQL Injection): 120-150 words
- Feature 5 (Rate Limiting): 130-150 words

================================================================================
IMPORTANT NOTES
================================================================================

DO NOT mention:
- Admin/Super Admin MD5 issues (set aside)
- Hardcoded credentials (internal issue)
- Super Admin role (only 4 roles: Admin, BHW, Midwife, User)

DO mention:
- All 5 system features with accurate details
- 3 notification types (SMS, Email, App)
- App notification times (8 AM, 11:59 PM, custom)
- Catch-up date = next week (7 days)
- Vaccine tracking for current/next month
- Growth assessment using WHO + BHW data
- CHR and Target Client List tracking
- CSRF in both login and account creation
- 4 roles only (Admin, BHW, Midwife, User)
- 10 login attempts for rate limiting
- Hostinger deployment platform

